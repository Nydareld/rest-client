angular.module("rest-client",["ui.router","ui.bootstrap","ngSanitize","pascalprecht.translate","nrcomInspinia","ui.ace"]);var modulesToRun=["rest-client"],keycloakJson={realm:"master",url:"http://plv2-qual.nrco.fr/auth",clientId:"error-manager","ssl-required":"external","public-client":!0};angular.module("rest-client").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){c.html5Mode({enabled:!1,requireBase:!0,rewriteLinks:!0}).hashPrefix(""),b.otherwise("/404"),a.state("rest-client",{abstract:!0,controller:"RootController",templateUrl:"./modules/common/content.html"})}]).run(function(a,b){a.$state=b}),angular.module("rest-client").constant("globals",{plApi:{baseUrl:"/api/v1"},debug:!0,debugRouter:!1,sampleData:!0}),angular.module("rest-client").config(["$stateProvider",function(a){a.state("rest-client.404",{url:"/404",templateUrl:"./modules/404/404.html"})}]),angular.module("rest-client").filter("stripHtml",function(){return function(a){return a.replace(/<[^>]*>/g,"")}}),angular.module("rest-client").controller("RootController",["$rootScope",function(a){this.logo={miniText:"test",img:"statics/img/icon.png"},this.user={username:"Theo Guerin",logout:"/logout"},this.menu=a.menu,this.helloText="Test layout Inspinia",this.descriptionText="Ceci est un exemple/test destiné a tester le layout "}]),angular.module("rest-client").config(["$stateProvider","menuProvider",function(a,b){a.state("rest-client.error-types",{entryName:"Erreurs fonctionelles",url:"/error-types",templateUrl:"./modules/errorTypes/errorTypes.html",controller:"errorTypesController",controllerAs:"ctrl",resolve:{errorTypes:["errorTypeService",function(a){return a.get(null,{limit:0})}]}}),b.add({stateName:"rest-client.error-types",name:"Erreurs fonctionelles",icon:"exclamation",importance:100})}]),angular.module("rest-client").controller("errorTypesController",["$scope","errorTypes","errorTypeService","swal","toaster",function(a,b,c,d,e){a.errorType={},a.errorTypes=b,this.addType=function(b){var d,f=angular.isUndefined(b._id);d=f?c.post(b):c.put(b),d.then(function(c){f?(a.errorTypes.unshift(b),a.errorType={}):b=c,e.success("Sauvegarde réussie","Type enregistré avec succès")}).catch(function(a){throw e.error("Erreur",a),a})},this.deleteType=function(b){d.confirmDelete({title:"Supression",text:"Êtes vous sûre de vouloir supprimer ce type d'erreur ?",closeOnConfirm:!1,closeOnCancel:!1}).then(function(){return c.delete(b)}).then(function(){a.errorTypes.splice(a.errorTypes.indexOf(b),1)}).catch(function(a){if(!0!==a)throw e.error("Erreur",a),a})}}]),angular.module("rest-client").config(["$stateProvider","$urlRouterProvider","menuProvider",function(a,b,c){a.state("rest-client.index",{entryName:"Accueil",url:"/index",controller:"indexController",templateUrl:"./modules/index/index.html"}),c.add({stateName:"rest-client.index",icon:"home",name:"Accueil",importance:0})}]),angular.module("rest-client").controller("indexController",[function(){}]),angular.module("rest-client").config(["$stateProvider","menuProvider",function(a,b){a.state("rest-client.logs",{entryName:"Logs",url:"/logs",templateUrl:"./modules/logs/logs.html",controller:"logsController",controllerAs:"ctrl",resolve:{logs:["logService",function(a){return a.get()}]}}),b.add({stateName:"rest-client.logs",name:"Logs",icon:"terminal"})}]),angular.module("rest-client").controller("logsController",["$scope","logs","logService",function(a,b,c){const d=this;a.logs=b,this.defaultLimitSize=50,this.limitSize=this.defaultLimitSize,this.refreshLogs=function(){c.get(null,{limit:d.limitSize}).then(function(b){a.logs=b}).catch(function(a){throw a})},this.getMoreLogs=function(){d.limitSize+=d.defaultLimitSize,d.refreshLogs()}}]),angular.module("rest-client").config(["$stateProvider","$urlRouterProvider","menuProvider",function(a,b,c){a.state("rest-client.reports",{entryName:"Incidents",url:"/reports",controller:"reportsController",controllerAs:"ctrl",templateUrl:"./modules/reports/index.html",resolve:{reports:["reportService",function(a){return a.get(null,{limit:0})}]}}),c.add({stateName:"rest-client.reports",icon:"exclamation-triangle",name:"Incidents"})}]),angular.module("rest-client").controller("reportsController",["$scope","reports","reportService",function(a,b,c){a.reports=b,this.refreshReports=function(){c.get(null,{limit:0}).then(function(b){a.reports=b}).catch(function(a){throw a})}}]),angular.module("rest-client").config(["$stateProvider","$urlRouterProvider","menuProvider",function(a,b,c){a.state("rest-client.reports.report",{entryName:["report",function(a){return"Rapport "+a._id}],url:"/:id",controller:"reportController",controllerAs:"ctrl",templateUrl:"./modules/reports/report/index.html",resolve:{report:["reportService","$stateParams",function(a,b){return console.log(b),a.getById({_id:b.id})}],logs:["logService","report",function(a,b){const c=new Date(b.date);return a.get(null,{filter:JSON.stringify({date:{$lt:new Date(c.getTime()+6e4),$gt:new Date(c.getTime()-6e4)}})})}]}})}]),angular.module("rest-client").controller("reportController",["$scope","report","logs","logService","reportService",function(a,b,c,d,e){a.logs=c,a.report=b}]),angular.module("rest-client").service("errorTypeService",["appResourceProxy",function(a){return a("/error-types")}]),angular.module("rest-client").service("logService",["appResourceProxy",function(a){return a("/log")}]),angular.module("rest-client").service("reportService",["appResourceProxy",function(a){return a("/error")}]);